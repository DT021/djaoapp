{% extends "base.html" %}
{% block body %}
<body>
    <div id="wrap">
        <div id="main">
            <header>
                <nav class="navbar navbar-default{% block navbar_extra_classes %}{% endblock %}">
                    <div class="navbar-header" style="width: 100%;">
                        <a class="navbar-brand-logo" href="/"><img src="{{'/static/img/logo-djaodjin-128.png'|djasset}}" /></a>
                        <a class="navbar-brand" href="{{request|url_home}}" data-intro="Edit homepage" data-position="bottom">{{request|site_printable_name}}</a>
                        {% block header_navbar_large %}
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <i class="fa fa-chevron-down"></i>
                        </button>
                        <div style="float:right;margin-right: 15px;">
                            <ul class="nav navbar-nav navbar-right">
                                {% if request|is_authenticated %}
                                <li>
                                    <a id="authenticated-user" href="{{request|url_profile}}">{{request.user.username}}</a>
                                </li>
                                <li class="hidden-xs">
                                    <a href="{{request|url_logout}}?next={{request|url_home}}">Sign Out</a>
                                </li>
                                {% else %}
                                <li>
                                    <a id="login" href="{{request|url_login}}"><i class="fa fa-sign-in fa-lg"></i> Sign In</a></li>
                                {% endif %}
                            </ul>
                            <ul class="hidden-xs nav navbar-nav navbar-right">
                                {% include "_appmenu.html" %}
                            </ul>
                        </div>
                        {% endblock %}
                    </div>
                    {% block header_navbar_small %}
                    <div class="hidden-sm hidden-md hidden-lg">
                        <div class="navbar-collapse collapse">
                            <ul class="nav navbar-nav navbar-right">
                                {% include "_appmenu.html" %}
                                {% if request|is_authenticated %}
                                <li>
                                    <a href="{{request|url_logout}}?next={{request|url_home}}">Sign Out</a>
                                </li>
                                {% endif %}
                            </ul>
                        </div>
                    </div>
                    {% endblock %}
                </nav>
                {% block fullviewport %}
                {% endblock %}
            </header>
            <div class="dashboard-container">
                <div class="dashboard-inner-container">
                    {% block dashboard_nav %}
                    <!-- <div class="dashboard-nav"></div> -->
                    {% endblock %}
                    <div class="dashboard-content">
                            <header class="dashboard-header">
                                <h2 class="dashboard-title">
                                    {% block saas_title %}{% endblock %}
                                    <span style="display: inline-block;">
                                        <sup style="display: none;font-size:0.5em;cursor:pointer;"><i id="help-request" class="fa fa-question-circle"></i></sup>
                                    </span>
                                </h2>
                                <p>{% block saas_descr %}{% endblock %}</p>
                            </header>
                            <div id="messages">
                                <div id="messages-content">
                                    {% for message in request|messages %}
                                    <div class="alert{% if message.tags %} alert-{{message.tags}}{% endif %}">
                                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        <div>{{message|safe}}</div>
                                    </div>
                                    {% endfor %}
                                    {% if form %}
                                    {% for message in form|messages %}
                                    <div class="alert alert-danger">
                                        <button type="button" class="close" data-dismiss="alert">&times;</button>
                                        <div>{{message}}</div>
                                    </div>
                                    {% endfor %}
                                    {% endif %}
                                </div>
                            </div>
                            {% block content %}
                            {% endblock %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% block footer %}
    <footer class="footer">
        <div class="footer-links">
            <a href="/legal/" target="_blank">Legal</a>
            <a href="https://github.com/djaodjin/" target="_blank"><i class="fa fa-github fa-sm"></i></a>
            <a href="https://twitter.com/djaodjin"  target="_blank"><i class="fa fa-twitter fa-sm"></i></a>
            <a href="https://plus.google.com/+Djaodjin" target="_blank" rel="publisher"><i class="fa fa-google-plus fa-sm"></i></a>
        </div>
        <div class="copyr">
            Powered by &copy; 2018 DjaoDjin. All rights reserved.
        </div>
    </footer>
    {% endblock %}
    {% block _bodyscripts %}
    {% assets "js_base" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    <script type="text/javascript">
jQuery(document).ready(function($) {
    {% if csrf_token %}
    $.ajaxSetup({
        crossDomain: false, // obviates need for sameOrigin test
        beforeSend: function(xhr, settings) {
            // these HTTP methods do not require CSRF protection
            if (!(/^(GET|HEAD|OPTIONS|TRACE)$/.test(settings.type))) {
                xhr.setRequestHeader("X-CSRFToken", "{{csrf_token}}");
            }
        }
    });
    {% endif %}
    toastr.options = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": false,
        "positionClass": "toast-top-full-width",
        "preventDuplicates": false,
        "onclick": null,
        "showDuration": 200,
        "hideDuration": 200,
        "timeOut": "0",
        "extendedTimeOut": "0",
        "showEasing": "linear",
        "hideEasing": "linear",
        "showMethod": "slideDown",
        "hideMethod": "slideUp",
        containerId: "messages-content",
        toastClass: "alert",
        iconClasses: {
            error: "alert-danger",
            info: "alert-info",
            success: "alert-success",
            warning: "alert-warning"
        },
    };
});
    </script>
    {% block bodyscripts %}{% endblock %}
    {% endblock %}
</body>
{% endblock %}
